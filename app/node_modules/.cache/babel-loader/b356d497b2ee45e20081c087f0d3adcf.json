{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _objectSpread3 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = require(\"prop-types\");\n\nvar constants = _interopRequireWildcard(require(\"focus-lock/constants\"));\n\nvar _useCallbackRef = require(\"use-callback-ref\");\n\nvar _FocusGuard = require(\"./FocusGuard\");\n\nvar _medium = require(\"./medium\");\n\nvar emptyArray = [];\n\nvar FocusLock = _react.default.forwardRef(function (props, parentRef) {\n  var _objectSpread2;\n\n  var _useState = (0, _react.useState)(),\n      _useState2 = (0, _slicedToArray2.default)(_useState, 2),\n      realObserved = _useState2[0],\n      setObserved = _useState2[1];\n\n  var observed = (0, _react.useRef)();\n  var isActive = (0, _react.useRef)(false);\n  var originalFocusedElement = (0, _react.useRef)(null);\n  var children = props.children,\n      disabled = props.disabled,\n      noFocusGuards = props.noFocusGuards,\n      persistentFocus = props.persistentFocus,\n      autoFocus = props.autoFocus,\n      allowTextSelection = props.allowTextSelection,\n      group = props.group,\n      className = props.className,\n      whiteList = props.whiteList,\n      _props$shards = props.shards,\n      shards = _props$shards === void 0 ? emptyArray : _props$shards,\n      _props$as = props.as,\n      Container = _props$as === void 0 ? 'div' : _props$as,\n      _props$lockProps = props.lockProps,\n      containerProps = _props$lockProps === void 0 ? {} : _props$lockProps,\n      SideCar = props.sideCar,\n      shouldReturnFocus = props.returnFocus,\n      onActivationCallback = props.onActivation,\n      onDeactivationCallback = props.onDeactivation;\n\n  var _useState3 = (0, _react.useState)({}),\n      _useState4 = (0, _slicedToArray2.default)(_useState3, 1),\n      id = _useState4[0]; // SIDE EFFECT CALLBACKS\n\n\n  var onActivation = (0, _react.useCallback)(function () {\n    originalFocusedElement.current = originalFocusedElement.current || document && document.activeElement;\n\n    if (observed.current && onActivationCallback) {\n      onActivationCallback(observed.current);\n    }\n\n    isActive.current = true;\n  }, [onActivationCallback]);\n  var onDeactivation = (0, _react.useCallback)(function () {\n    isActive.current = false;\n\n    if (onDeactivationCallback) {\n      onDeactivationCallback(observed.current);\n    }\n  }, [onDeactivationCallback]);\n  var returnFocus = (0, _react.useCallback)(function (allowDefer) {\n    var current = originalFocusedElement.current;\n\n    if (Boolean(shouldReturnFocus) && current && current.focus) {\n      var focusOptions = (0, _typeof2.default)(shouldReturnFocus) === 'object' ? shouldReturnFocus : undefined;\n      originalFocusedElement.current = null;\n\n      if (allowDefer) {\n        // React might return focus after update\n        // it's safer to defer the action\n        Promise.resolve().then(function () {\n          return current.focus(focusOptions);\n        });\n      } else {\n        current.focus(focusOptions);\n      }\n    }\n  }, [shouldReturnFocus]); // MEDIUM CALLBACKS\n\n  var onFocus = (0, _react.useCallback)(function (event) {\n    if (isActive.current) {\n      _medium.mediumFocus.useMedium(event);\n    }\n  }, []);\n  var onBlur = _medium.mediumBlur.useMedium; // REF PROPAGATION\n  // not using real refs due to race conditions\n\n  var setObserveNode = (0, _react.useCallback)(function (newObserved) {\n    if (observed.current !== newObserved) {\n      observed.current = newObserved;\n      setObserved(newObserved);\n    }\n  }, []);\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (typeof allowTextSelection !== 'undefined') {\n      // eslint-disable-next-line no-console\n      console.warn('React-Focus-Lock: allowTextSelection is deprecated and enabled by default');\n    }\n\n    _react.default.useEffect(function () {\n      if (!observed.current) {\n        // eslint-disable-next-line no-console\n        console.error('FocusLock: could not obtain ref to internal node');\n      }\n    }, []);\n  }\n\n  var lockProps = (0, _objectSpread3.default)((_objectSpread2 = {}, (0, _defineProperty2.default)(_objectSpread2, constants.FOCUS_DISABLED, disabled && 'disabled'), (0, _defineProperty2.default)(_objectSpread2, constants.FOCUS_GROUP, group), _objectSpread2), containerProps);\n  var hasLeadingGuards = noFocusGuards !== true;\n  var hasTailingGuards = hasLeadingGuards && noFocusGuards !== 'tail';\n  var mergedRef = (0, _useCallbackRef.useMergeRefs)([parentRef, setObserveNode]);\n  return _react.default.createElement(_react.default.Fragment, null, hasLeadingGuards && [_react.default.createElement(\"div\", {\n    key: \"guard-first\",\n    \"data-focus-guard\": true,\n    tabIndex: disabled ? -1 : 0,\n    style: _FocusGuard.hiddenGuard\n  }), // nearest focus guard\n  _react.default.createElement(\"div\", {\n    key: \"guard-nearest\",\n    \"data-focus-guard\": true,\n    tabIndex: disabled ? -1 : 1,\n    style: _FocusGuard.hiddenGuard\n  })], !disabled && _react.default.createElement(SideCar, {\n    id: id,\n    sideCar: _medium.mediumSidecar,\n    observed: realObserved,\n    disabled: disabled,\n    persistentFocus: persistentFocus,\n    autoFocus: autoFocus,\n    whiteList: whiteList,\n    shards: shards,\n    onActivation: onActivation,\n    onDeactivation: onDeactivation,\n    returnFocus: returnFocus\n  }), _react.default.createElement(Container, (0, _extends2.default)({\n    ref: mergedRef\n  }, lockProps, {\n    className: className,\n    onBlur: onBlur,\n    onFocus: onFocus\n  }), children), hasTailingGuards && _react.default.createElement(\"div\", {\n    \"data-focus-guard\": true,\n    tabIndex: disabled ? -1 : 0,\n    style: _FocusGuard.hiddenGuard\n  }));\n});\n\nFocusLock.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  children: _propTypes.node,\n  disabled: _propTypes.bool,\n  returnFocus: (0, _propTypes.oneOfType)([_propTypes.bool, _propTypes.object]),\n  noFocusGuards: _propTypes.bool,\n  allowTextSelection: _propTypes.bool,\n  autoFocus: _propTypes.bool,\n  persistentFocus: _propTypes.bool,\n  group: _propTypes.string,\n  className: _propTypes.string,\n  whiteList: _propTypes.func,\n  shards: (0, _propTypes.arrayOf)(_propTypes.any),\n  as: (0, _propTypes.oneOfType)([_propTypes.string, _propTypes.func, _propTypes.object]),\n  lockProps: _propTypes.object,\n  onActivation: _propTypes.func,\n  onDeactivation: _propTypes.func,\n  sideCar: _propTypes.any.isRequired\n} : {};\nFocusLock.defaultProps = {\n  children: undefined,\n  disabled: false,\n  returnFocus: false,\n  noFocusGuards: false,\n  autoFocus: true,\n  persistentFocus: false,\n  allowTextSelection: undefined,\n  group: undefined,\n  className: undefined,\n  whiteList: undefined,\n  shards: undefined,\n  as: 'div',\n  lockProps: {},\n  onActivation: undefined,\n  onDeactivation: undefined\n};\nvar _default = FocusLock;\nexports.default = _default;","map":{"version":3,"sources":["/Users/baptiste/Projects/marvel/app/node_modules/react-focus-lock/dist/cjs/Lock.js"],"names":["_interopRequireWildcard","require","_interopRequireDefault","Object","defineProperty","exports","value","default","_extends2","_defineProperty2","_objectSpread3","_typeof2","_slicedToArray2","_react","_propTypes","constants","_useCallbackRef","_FocusGuard","_medium","emptyArray","FocusLock","forwardRef","props","parentRef","_objectSpread2","_useState","useState","_useState2","realObserved","setObserved","observed","useRef","isActive","originalFocusedElement","children","disabled","noFocusGuards","persistentFocus","autoFocus","allowTextSelection","group","className","whiteList","_props$shards","shards","_props$as","as","Container","_props$lockProps","lockProps","containerProps","SideCar","sideCar","shouldReturnFocus","returnFocus","onActivationCallback","onActivation","onDeactivationCallback","onDeactivation","_useState3","_useState4","id","useCallback","current","document","activeElement","allowDefer","Boolean","focus","focusOptions","undefined","Promise","resolve","then","onFocus","event","mediumFocus","useMedium","onBlur","mediumBlur","setObserveNode","newObserved","process","env","NODE_ENV","console","warn","useEffect","error","FOCUS_DISABLED","FOCUS_GROUP","hasLeadingGuards","hasTailingGuards","mergedRef","useMergeRefs","createElement","Fragment","key","tabIndex","style","hiddenGuard","mediumSidecar","ref","propTypes","node","bool","oneOfType","object","string","func","arrayOf","any","isRequired","defaultProps","_default"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _objectSpread3 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = require(\"prop-types\");\n\nvar constants = _interopRequireWildcard(require(\"focus-lock/constants\"));\n\nvar _useCallbackRef = require(\"use-callback-ref\");\n\nvar _FocusGuard = require(\"./FocusGuard\");\n\nvar _medium = require(\"./medium\");\n\nvar emptyArray = [];\n\nvar FocusLock = _react.default.forwardRef(function (props, parentRef) {\n  var _objectSpread2;\n\n  var _useState = (0, _react.useState)(),\n      _useState2 = (0, _slicedToArray2.default)(_useState, 2),\n      realObserved = _useState2[0],\n      setObserved = _useState2[1];\n\n  var observed = (0, _react.useRef)();\n  var isActive = (0, _react.useRef)(false);\n  var originalFocusedElement = (0, _react.useRef)(null);\n  var children = props.children,\n      disabled = props.disabled,\n      noFocusGuards = props.noFocusGuards,\n      persistentFocus = props.persistentFocus,\n      autoFocus = props.autoFocus,\n      allowTextSelection = props.allowTextSelection,\n      group = props.group,\n      className = props.className,\n      whiteList = props.whiteList,\n      _props$shards = props.shards,\n      shards = _props$shards === void 0 ? emptyArray : _props$shards,\n      _props$as = props.as,\n      Container = _props$as === void 0 ? 'div' : _props$as,\n      _props$lockProps = props.lockProps,\n      containerProps = _props$lockProps === void 0 ? {} : _props$lockProps,\n      SideCar = props.sideCar,\n      shouldReturnFocus = props.returnFocus,\n      onActivationCallback = props.onActivation,\n      onDeactivationCallback = props.onDeactivation;\n\n  var _useState3 = (0, _react.useState)({}),\n      _useState4 = (0, _slicedToArray2.default)(_useState3, 1),\n      id = _useState4[0]; // SIDE EFFECT CALLBACKS\n\n\n  var onActivation = (0, _react.useCallback)(function () {\n    originalFocusedElement.current = originalFocusedElement.current || document && document.activeElement;\n\n    if (observed.current && onActivationCallback) {\n      onActivationCallback(observed.current);\n    }\n\n    isActive.current = true;\n  }, [onActivationCallback]);\n  var onDeactivation = (0, _react.useCallback)(function () {\n    isActive.current = false;\n\n    if (onDeactivationCallback) {\n      onDeactivationCallback(observed.current);\n    }\n  }, [onDeactivationCallback]);\n  var returnFocus = (0, _react.useCallback)(function (allowDefer) {\n    var current = originalFocusedElement.current;\n\n    if (Boolean(shouldReturnFocus) && current && current.focus) {\n      var focusOptions = (0, _typeof2.default)(shouldReturnFocus) === 'object' ? shouldReturnFocus : undefined;\n      originalFocusedElement.current = null;\n\n      if (allowDefer) {\n        // React might return focus after update\n        // it's safer to defer the action\n        Promise.resolve().then(function () {\n          return current.focus(focusOptions);\n        });\n      } else {\n        current.focus(focusOptions);\n      }\n    }\n  }, [shouldReturnFocus]); // MEDIUM CALLBACKS\n\n  var onFocus = (0, _react.useCallback)(function (event) {\n    if (isActive.current) {\n      _medium.mediumFocus.useMedium(event);\n    }\n  }, []);\n  var onBlur = _medium.mediumBlur.useMedium; // REF PROPAGATION\n  // not using real refs due to race conditions\n\n  var setObserveNode = (0, _react.useCallback)(function (newObserved) {\n    if (observed.current !== newObserved) {\n      observed.current = newObserved;\n      setObserved(newObserved);\n    }\n  }, []);\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (typeof allowTextSelection !== 'undefined') {\n      // eslint-disable-next-line no-console\n      console.warn('React-Focus-Lock: allowTextSelection is deprecated and enabled by default');\n    }\n\n    _react.default.useEffect(function () {\n      if (!observed.current) {\n        // eslint-disable-next-line no-console\n        console.error('FocusLock: could not obtain ref to internal node');\n      }\n    }, []);\n  }\n\n  var lockProps = (0, _objectSpread3.default)((_objectSpread2 = {}, (0, _defineProperty2.default)(_objectSpread2, constants.FOCUS_DISABLED, disabled && 'disabled'), (0, _defineProperty2.default)(_objectSpread2, constants.FOCUS_GROUP, group), _objectSpread2), containerProps);\n  var hasLeadingGuards = noFocusGuards !== true;\n  var hasTailingGuards = hasLeadingGuards && noFocusGuards !== 'tail';\n  var mergedRef = (0, _useCallbackRef.useMergeRefs)([parentRef, setObserveNode]);\n  return _react.default.createElement(_react.default.Fragment, null, hasLeadingGuards && [_react.default.createElement(\"div\", {\n    key: \"guard-first\",\n    \"data-focus-guard\": true,\n    tabIndex: disabled ? -1 : 0,\n    style: _FocusGuard.hiddenGuard\n  }), // nearest focus guard\n  _react.default.createElement(\"div\", {\n    key: \"guard-nearest\",\n    \"data-focus-guard\": true,\n    tabIndex: disabled ? -1 : 1,\n    style: _FocusGuard.hiddenGuard\n  })], !disabled && _react.default.createElement(SideCar, {\n    id: id,\n    sideCar: _medium.mediumSidecar,\n    observed: realObserved,\n    disabled: disabled,\n    persistentFocus: persistentFocus,\n    autoFocus: autoFocus,\n    whiteList: whiteList,\n    shards: shards,\n    onActivation: onActivation,\n    onDeactivation: onDeactivation,\n    returnFocus: returnFocus\n  }), _react.default.createElement(Container, (0, _extends2.default)({\n    ref: mergedRef\n  }, lockProps, {\n    className: className,\n    onBlur: onBlur,\n    onFocus: onFocus\n  }), children), hasTailingGuards && _react.default.createElement(\"div\", {\n    \"data-focus-guard\": true,\n    tabIndex: disabled ? -1 : 0,\n    style: _FocusGuard.hiddenGuard\n  }));\n});\n\nFocusLock.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  children: _propTypes.node,\n  disabled: _propTypes.bool,\n  returnFocus: (0, _propTypes.oneOfType)([_propTypes.bool, _propTypes.object]),\n  noFocusGuards: _propTypes.bool,\n  allowTextSelection: _propTypes.bool,\n  autoFocus: _propTypes.bool,\n  persistentFocus: _propTypes.bool,\n  group: _propTypes.string,\n  className: _propTypes.string,\n  whiteList: _propTypes.func,\n  shards: (0, _propTypes.arrayOf)(_propTypes.any),\n  as: (0, _propTypes.oneOfType)([_propTypes.string, _propTypes.func, _propTypes.object]),\n  lockProps: _propTypes.object,\n  onActivation: _propTypes.func,\n  onDeactivation: _propTypes.func,\n  sideCar: _propTypes.any.isRequired\n} : {};\nFocusLock.defaultProps = {\n  children: undefined,\n  disabled: false,\n  returnFocus: false,\n  noFocusGuards: false,\n  autoFocus: true,\n  persistentFocus: false,\n  allowTextSelection: undefined,\n  group: undefined,\n  className: undefined,\n  whiteList: undefined,\n  shards: undefined,\n  as: 'div',\n  lockProps: {},\n  onActivation: undefined,\n  onDeactivation: undefined\n};\nvar _default = FocusLock;\nexports.default = _default;"]},"metadata":{},"sourceType":"script"}