{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/objectWithoutPropertiesLoose\";\n/** @jsx jsx */\n\nimport { jsx } from \"@emotion/core\";\nimport { useEffect, useState, forwardRef, useRef } from \"react\";\nimport Box from \"../Box\";\nexport var useHasImageLoaded = function useHasImageLoaded(_ref) {\n  var src = _ref.src,\n      onLoad = _ref.onLoad,\n      onError = _ref.onError;\n  var isMounted = useRef(true);\n\n  var _useState = useState(false),\n      hasLoaded = _useState[0],\n      setHasLoaded = _useState[1];\n\n  useEffect(function () {\n    if (!src) {\n      return;\n    }\n\n    var image = new window.Image();\n    image.src = src;\n\n    image.onload = function (event) {\n      if (isMounted.current) {\n        setHasLoaded(true);\n        onLoad && onLoad(event);\n      }\n    };\n\n    image.onError = function (event) {\n      if (isMounted.current) {\n        setHasLoaded(false);\n        onError && onError(event);\n      }\n    };\n  }, [src, onLoad, onError]);\n  useEffect(function () {\n    return function () {\n      isMounted.current = false;\n    };\n  }, []);\n  return hasLoaded;\n};\nvar NativeImage = forwardRef(function (_ref2, ref) {\n  var htmlWidth = _ref2.htmlWidth,\n      htmlHeight = _ref2.htmlHeight,\n      alt = _ref2.alt,\n      props = _objectWithoutPropertiesLoose(_ref2, [\"htmlWidth\", \"htmlHeight\", \"alt\"]);\n\n  return jsx(\"img\", _extends({\n    width: htmlWidth,\n    height: htmlHeight,\n    ref: ref,\n    alt: alt\n  }, props));\n});\nvar Image = forwardRef(function (_ref3, ref) {\n  var src = _ref3.src,\n      fallbackSrc = _ref3.fallbackSrc,\n      onError = _ref3.onError,\n      onLoad = _ref3.onLoad,\n      ignoreFallback = _ref3.ignoreFallback,\n      props = _objectWithoutPropertiesLoose(_ref3, [\"src\", \"fallbackSrc\", \"onError\", \"onLoad\", \"ignoreFallback\"]);\n\n  var hasLoaded = useHasImageLoaded({\n    src: src,\n    onLoad: onLoad,\n    onError: onError\n  });\n  var imageProps;\n\n  if (ignoreFallback) {\n    imageProps = {\n      src: src,\n      onLoad: onLoad,\n      onError: onError\n    };\n  } else {\n    imageProps = {\n      src: hasLoaded ? src : fallbackSrc\n    };\n  }\n\n  return jsx(Box, _extends({\n    as: NativeImage,\n    ref: ref\n  }, imageProps, props));\n});\nImage.displayName = \"Image\";\nexport default Image;","map":{"version":3,"sources":["/Users/baptiste/Projects/marvel/app/node_modules/@chakra-ui/core/dist/es/Image/index.js"],"names":["_extends","_objectWithoutPropertiesLoose","jsx","useEffect","useState","forwardRef","useRef","Box","useHasImageLoaded","_ref","src","onLoad","onError","isMounted","_useState","hasLoaded","setHasLoaded","image","window","Image","onload","event","current","NativeImage","_ref2","ref","htmlWidth","htmlHeight","alt","props","width","height","_ref3","fallbackSrc","ignoreFallback","imageProps","as","displayName"],"mappings":"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","sourcesContent":["import _extends from \"@babel/runtime/helpers/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/objectWithoutPropertiesLoose\";\n\n/** @jsx jsx */\nimport { jsx } from \"@emotion/core\";\nimport { useEffect, useState, forwardRef, useRef } from \"react\";\nimport Box from \"../Box\";\nexport var useHasImageLoaded = function useHasImageLoaded(_ref) {\n  var src = _ref.src,\n      onLoad = _ref.onLoad,\n      onError = _ref.onError;\n  var isMounted = useRef(true);\n\n  var _useState = useState(false),\n      hasLoaded = _useState[0],\n      setHasLoaded = _useState[1];\n\n  useEffect(function () {\n    if (!src) {\n      return;\n    }\n\n    var image = new window.Image();\n    image.src = src;\n\n    image.onload = function (event) {\n      if (isMounted.current) {\n        setHasLoaded(true);\n        onLoad && onLoad(event);\n      }\n    };\n\n    image.onError = function (event) {\n      if (isMounted.current) {\n        setHasLoaded(false);\n        onError && onError(event);\n      }\n    };\n  }, [src, onLoad, onError]);\n  useEffect(function () {\n    return function () {\n      isMounted.current = false;\n    };\n  }, []);\n  return hasLoaded;\n};\nvar NativeImage = forwardRef(function (_ref2, ref) {\n  var htmlWidth = _ref2.htmlWidth,\n      htmlHeight = _ref2.htmlHeight,\n      alt = _ref2.alt,\n      props = _objectWithoutPropertiesLoose(_ref2, [\"htmlWidth\", \"htmlHeight\", \"alt\"]);\n\n  return jsx(\"img\", _extends({\n    width: htmlWidth,\n    height: htmlHeight,\n    ref: ref,\n    alt: alt\n  }, props));\n});\nvar Image = forwardRef(function (_ref3, ref) {\n  var src = _ref3.src,\n      fallbackSrc = _ref3.fallbackSrc,\n      onError = _ref3.onError,\n      onLoad = _ref3.onLoad,\n      ignoreFallback = _ref3.ignoreFallback,\n      props = _objectWithoutPropertiesLoose(_ref3, [\"src\", \"fallbackSrc\", \"onError\", \"onLoad\", \"ignoreFallback\"]);\n\n  var hasLoaded = useHasImageLoaded({\n    src: src,\n    onLoad: onLoad,\n    onError: onError\n  });\n  var imageProps;\n\n  if (ignoreFallback) {\n    imageProps = {\n      src: src,\n      onLoad: onLoad,\n      onError: onError\n    };\n  } else {\n    imageProps = {\n      src: hasLoaded ? src : fallbackSrc\n    };\n  }\n\n  return jsx(Box, _extends({\n    as: NativeImage,\n    ref: ref\n  }, imageProps, props));\n});\nImage.displayName = \"Image\";\nexport default Image;"]},"metadata":{},"sourceType":"module"}