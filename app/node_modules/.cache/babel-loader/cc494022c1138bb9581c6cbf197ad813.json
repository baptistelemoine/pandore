{"ast":null,"code":"var _jsxFileName = \"/Users/baptiste/Projects/marvel/src/modules/list/index.js\";\nimport React, { Fragment, useState } from \"react\";\nimport ListItem from \"../common/ListItem\";\nimport { Button } from \"@chakra-ui/core\";\nimport useRequest from \"../../hooks/useRequest\";\nimport SuspenseFallback from \"../common/SuspenseFallback\";\nimport { useSWRPages } from \"swr\";\n\nconst List = () => {\n  const {\n    pages,\n    isLoadingMore,\n    isReachingEnd,\n    loadMore\n  } = useSWRPages(\"list\", ({\n    offset,\n    withSWR\n  }) => {\n    const url = `https://gateway.marvel.com:443/v1/public/characters?apikey=2f1fed568f42c3ac72c3e50846da7949&offset=${offset || 0}`;\n    /* eslint-disable */\n\n    const {\n      data\n    } = withSWR(useRequest({\n      url\n    }, {\n      suspense: !offset\n    }));\n    if (!data) return null;\n    const {\n      results\n    } = data.data;\n    return results && results.map(item => React.createElement(ListItem, Object.assign({\n      key: item.id\n    }, item, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 19\n      },\n      __self: this\n    })));\n  }, ({\n    data: {\n      data\n    }\n  }) => data.offset + data.limit, []);\n  return React.createElement(Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 27\n    },\n    __self: this\n  }, pages, React.createElement(Button, {\n    mt: 3,\n    w: \"100%\",\n    onClick: loadMore,\n    disabled: isReachingEnd,\n    isLoading: isLoadingMore,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29\n    },\n    __self: this\n  }, \"Load more\"));\n};\n\nexport default List;","map":{"version":3,"sources":["/Users/baptiste/Projects/marvel/src/modules/list/index.js"],"names":["React","Fragment","useState","ListItem","Button","useRequest","SuspenseFallback","useSWRPages","List","pages","isLoadingMore","isReachingEnd","loadMore","offset","withSWR","url","data","suspense","results","map","item","id","limit"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,QAA1B,QAA0C,OAA1C;AACA,OAAOC,QAAP,MAAqB,oBAArB;AACA,SAASC,MAAT,QAAuB,iBAAvB;AACA,OAAOC,UAAP,MAAuB,wBAAvB;AACA,OAAOC,gBAAP,MAA6B,4BAA7B;AACA,SAASC,WAAT,QAA4B,KAA5B;;AAEA,MAAMC,IAAI,GAAG,MAAM;AACjB,QAAM;AAAEC,IAAAA,KAAF;AAASC,IAAAA,aAAT;AAAwBC,IAAAA,aAAxB;AAAuCC,IAAAA;AAAvC,MAAoDL,WAAW,CACnE,MADmE,EAEnE,CAAC;AAAEM,IAAAA,MAAF;AAAUC,IAAAA;AAAV,GAAD,KAAyB;AACvB,UAAMC,GAAG,GAAI,sGAAqGF,MAAM,IACtH,CAAE,EADJ;AAEA;;AACA,UAAM;AAAEG,MAAAA;AAAF,QAAWF,OAAO,CAACT,UAAU,CAAC;AAAEU,MAAAA;AAAF,KAAD,EAAU;AAAEE,MAAAA,QAAQ,EAAE,CAACJ;AAAb,KAAV,CAAX,CAAxB;AACA,QAAI,CAACG,IAAL,EAAW,OAAO,IAAP;AACX,UAAM;AAAEE,MAAAA;AAAF,QAAcF,IAAI,CAACA,IAAzB;AACA,WACEE,OAAO,IAAIA,OAAO,CAACC,GAAR,CAAYC,IAAI,IAAI,oBAAC,QAAD;AAAU,MAAA,GAAG,EAAEA,IAAI,CAACC;AAApB,OAA4BD,IAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAApB,CADb;AAGD,GAZkE,EAanE,CAAC;AAAEJ,IAAAA,IAAI,EAAE;AAAEA,MAAAA;AAAF;AAAR,GAAD,KAAwBA,IAAI,CAACH,MAAL,GAAcG,IAAI,CAACM,KAbwB,EAcnE,EAdmE,CAArE;AAiBA,SACE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGb,KADH,EAEE,oBAAC,MAAD;AACE,IAAA,EAAE,EAAE,CADN;AAEE,IAAA,CAAC,EAAC,MAFJ;AAGE,IAAA,OAAO,EAAEG,QAHX;AAIE,IAAA,QAAQ,EAAED,aAJZ;AAKE,IAAA,SAAS,EAAED,aALb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAFF,CADF;AAcD,CAhCD;;AAkCA,eAAeF,IAAf","sourcesContent":["import React, { Fragment, useState } from \"react\";\nimport ListItem from \"../common/ListItem\";\nimport { Button } from \"@chakra-ui/core\";\nimport useRequest from \"../../hooks/useRequest\";\nimport SuspenseFallback from \"../common/SuspenseFallback\";\nimport { useSWRPages } from \"swr\";\n\nconst List = () => {\n  const { pages, isLoadingMore, isReachingEnd, loadMore } = useSWRPages(\n    \"list\",\n    ({ offset, withSWR }) => {\n      const url = `https://gateway.marvel.com:443/v1/public/characters?apikey=2f1fed568f42c3ac72c3e50846da7949&offset=${offset ||\n        0}`;\n      /* eslint-disable */\n      const { data } = withSWR(useRequest({ url }, { suspense: !offset }));\n      if (!data) return null;\n      const { results } = data.data;\n      return (\n        results && results.map(item => <ListItem key={item.id} {...item} />)\n      );\n    },\n    ({ data: { data } }) => data.offset + data.limit,\n    []\n  );\n\n  return (\n    <Fragment>\n      {pages}\n      <Button\n        mt={3}\n        w=\"100%\"\n        onClick={loadMore}\n        disabled={isReachingEnd}\n        isLoading={isLoadingMore}\n      >\n        Load more\n      </Button>\n    </Fragment>\n  );\n};\n\nexport default List;\n"]},"metadata":{},"sourceType":"module"}